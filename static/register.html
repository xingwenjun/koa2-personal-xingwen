<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <title></title>
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
    <link rel="stylesheet" href="/static/css/common.css" />
</head>

<body>
    <p><span>用户名:</span><input class="userName" type="text" /></p>
    <p><span>密码:</span><input class="userPwd" type="password" /></p>
    <p><span>真实姓名:</span><input class="realName" type="text" /></p>
    <p><span>生日:</span><input class="birth" type="date" /></p>
    <p><span>身份证号:</span><input class="idcard" type="text" /></p>
    <button class="btn reg">注册</button>
</body>
<script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
<script type="text/javascript">
    $('.btn.reg').click(function(){
        reg();
    })
    function reg() {
        var user = $('.userName').val();
        var pwd = $('.userPwd').val();
        var realName = $('.realName').val();
        var birth = $('.birth').val();
        if (birth) birth = Date.parse(new Date(birth)) / 1000;
        var idcard = $('.idcard').val();
        $.ajax({
            url: '/user',
            data: {
                userName: user,
                password: pwd,
                realName: realName,
                birth: birth,
                idcard: idcard
            },
            dataType: 'json',
            type: 'POST',
            success: function(res) {
                if (res.data) {
                    location.href = "/login.html";
                }
            },
            error: function(xhr) {

            }
        })
    }
</script>

</html>